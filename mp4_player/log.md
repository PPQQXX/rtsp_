### mp4_player项目介绍


#### 1、思路介绍
```
    创建两个环形队列，里面用来存放处理后可直接播放的h264码流数据和AAC码流
    创建一个解封装线程，不断demuxer并进行过滤/添加adts头处理码流，将数据入队
    创建一个解码播放线程，从队列中取码流数据，然后解码播放。
```

#### 2、文件介绍(相关结构体)
```
    1. packet_queue.h        提供环形缓冲区的数据管理机制(支持多线程)，不涉及数据块的创建和销毁
    2. stream.h              提供解封装线程，包含StreamState,MediaState结构的定义和初始化
    3. audio_video_thread.h  提供音频和视频码流的解码播放线程，包含AudioState,VideoState结构
    4. play_mp4.c            提供主线程，播放控制线程，定时刷新事件线程
```

#### 3、结构层次：
```
    MediaState描述了媒体文件的信息，是最顶层的结构；
    VideoState描述了视频码流解码播放的相关信息；
    AudioState描述了音频码流解码播放的相关信息；
    StreamState描述了解码器和码流管理，是最底层的结构。
```

#### 4、运行：./myrun.sh play_mp4.c
注意：目前仅支持h264编码和aac lc编码的mp4文件

#### 5、优化：
**
>问题1：播放控制，解封装线程循环无法跳出，猜测原因是队列操作的影响
>问题2：可以尝试抽象统一音频和视频的码流方法，消除if-else(策略模式)。
>其它：。。。




